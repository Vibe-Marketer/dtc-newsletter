---
phase: 02-core-sources
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/02-core-sources/02-TUBELAB-DECISION.md
autonomous: false

user_setup:
  - service: tubelab
    why: "YouTube outlier detection API"
    env_vars:
      - name: TUBELAB_API_KEY
        source: "TubeLab Dashboard (if API exists)"
    dashboard_config:
      - task: "Create TubeLab account"
        location: "https://www.tubelab.app"
      - task: "Check for API access and pricing"
        location: "https://www.tubelab.app/api or /pricing"

must_haves:
  truths:
    - "User knows whether TubeLab API exists and is affordable"
    - "Decision documented: TubeLab API or YouTube Data API fallback"
    - "API key obtained if using TubeLab; fallback path clear if not"
  artifacts:
    - path: ".planning/phases/02-core-sources/02-TUBELAB-DECISION.md"
      provides: "TubeLab API decision and findings"
      contains: "decision:"
  key_links: []
---

<objective>
Research TubeLab API availability and pricing, checkpoint for user to create account and get API key, document decision for YouTube content fetching approach.

Purpose: TubeLab provides pre-built outlier detection for YouTube. If unavailable or too expensive, we fall back to YouTube Data API with manual scoring (same pattern as Reddit). This decision gates the YouTube fetcher implementation.

Output: Decision document with TubeLab findings and chosen approach (TubeLab API or YouTube Data API fallback).
</objective>

<execution_context>
@~/.config/Claude/get-shit-done/workflows/execute-plan.md
@~/.config/Claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-sources/02-CONTEXT.md
@.planning/phases/02-core-sources/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Research TubeLab API</name>
  <files>.planning/phases/02-core-sources/02-TUBELAB-RESEARCH.md</files>
  <action>
Research TubeLab by:
1. Use web search to find TubeLab API documentation, pricing, and availability
2. Search for: "TubeLab API documentation", "TubeLab YouTube analytics API", "TubeLab pricing API"
3. Check if TubeLab offers:
   - Public REST API (not just web UI)
   - API key authentication
   - Outlier score endpoint
   - Reasonable pricing (under $50/month for our use case)
4. Document findings including:
   - API availability: yes/no/unclear
   - Authentication method
   - Key endpoints for our use case
   - Pricing structure
   - Rate limits if known

Create `.planning/phases/02-core-sources/02-TUBELAB-RESEARCH.md` with structured findings.

If API appears unavailable or web-only, note that YouTube Data API fallback will be used.
  </action>
  <verify>
02-TUBELAB-RESEARCH.md exists with:
- API availability status
- Pricing information (or "no public pricing found")
- Recommendation: "use TubeLab API" or "use YouTube Data API fallback"
  </verify>
  <done>Research document exists with clear recommendation</done>
</task>

<task type="checkpoint:decision" gate="blocking">
  <name>Task 2: User creates TubeLab account and gets API key (if available)</name>
  <decision>TubeLab API access and YouTube content fetching approach</decision>
  <context>
Based on research findings, user needs to:
- If TubeLab API exists: Create account, check pricing, get API key
- If TubeLab API unavailable: Confirm YouTube Data API fallback

This checkpoint determines which implementation path Plan 03 (YouTube fetcher) will take.
  </context>
  <options>
    <option id="tubelab">
      <name>Use TubeLab API</name>
      <action>
1. Visit https://www.tubelab.app
2. Create account
3. Navigate to API settings or dashboard
4. Get API key
5. Add to .env: TUBELAB_API_KEY=your_key_here
6. Note down key endpoints for video fetching and outlier scores
      </action>
      <when>TubeLab has public API with acceptable pricing</when>
    </option>
    <option id="youtube-data-api">
      <name>Use YouTube Data API (fallback)</name>
      <action>
1. Visit https://console.cloud.google.com
2. Create project (or use existing)
3. Enable YouTube Data API v3
4. Create API key (API & Services â†’ Credentials)
5. Add to .env: YOUTUBE_API_KEY=your_key_here
6. Note: 10,000 units/day free tier, search costs 100 units
      </action>
      <when>TubeLab API unavailable, too expensive, or requires enterprise access</when>
    </option>
  </options>
  <resume-signal>
Reply with your choice:
- "tubelab" + provide API key info and any endpoint details
- "youtube" + confirm YouTube Data API key is configured in .env
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Document API decision</name>
  <files>.planning/phases/02-core-sources/02-TUBELAB-DECISION.md</files>
  <action>
Based on user's checkpoint response, create decision document:

```markdown
# TubeLab API Decision

**Date:** [current date]
**Decision:** [TubeLab API | YouTube Data API Fallback]

## Research Findings

[Summary from 02-TUBELAB-RESEARCH.md]

## User Action

[What user did: created TubeLab account, got API key, OR configured YouTube Data API]

## Implementation Path

**Chosen approach:** [TubeLab | YouTube Data API]

### If TubeLab:
- API Key: Configured in .env as TUBELAB_API_KEY
- Endpoints to use: [from user or research]
- Outlier score: Provided by API

### If YouTube Data API:
- API Key: Configured in .env as YOUTUBE_API_KEY
- Quota: 10,000 units/day (search = 100 units)
- Outlier score: Calculate manually (same formula as Reddit)
- Channel averages: Fetch last 50 videos per channel, calculate mean views

## Impact on Plan 03

[How this affects YouTube fetcher implementation]
```

This document will be referenced by Plan 03 to determine implementation approach.
  </action>
  <verify>
02-TUBELAB-DECISION.md exists with:
- Clear "Decision:" field
- Implementation path documented
- .env variable confirmed
  </verify>
  <done>Decision document exists and Plan 03 can proceed based on chosen approach</done>
</task>

</tasks>

<verification>
1. 02-TUBELAB-RESEARCH.md exists with API availability findings
2. 02-TUBELAB-DECISION.md exists with clear decision
3. Either TUBELAB_API_KEY or YOUTUBE_API_KEY configured in .env
4. Plan 03 has clear implementation path
</verification>

<success_criteria>
- TubeLab API researched and availability documented
- User has created appropriate account and configured API key
- Decision clearly documented for downstream plans
- Implementation approach (TubeLab or YouTube Data API) is unambiguous
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-sources/02-01-SUMMARY.md`
</output>
